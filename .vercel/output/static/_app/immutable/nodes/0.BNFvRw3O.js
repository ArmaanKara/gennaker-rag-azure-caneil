import{s as ie,z as be,A as te,H as rt,B as re,b as C,C as lt,f as h,D as $e,i as T,n as le,E as Te,h as o,j as p,O as nt,e as E,a as L,t as X,c as $,g as D,d as Y,K as fe,u as se,k as pe,P as at,Q as st,R as it,w as Ce,l as ae,I as ot,m as Ie,q as de,y as Se,G as we,M as ut,F as ye,_ as Le,T as ht,W as gt,x as ce,J as pt,o as _t,S as vt}from"../chunks/scheduler.nTQPeTYQ.js";import{S as oe,i as ue,c as q,a as J,m as W,t as I,d as B,e as Q,g as me,f as he,h as De}from"../chunks/index.CanFk0Lh.js";import{b as z,g as Oe,d as Pe}from"../chunks/entry.DNyy5_P4.js";import{n as bt,p as Ee}from"../chunks/stores.DJlJkp3c.js";import{P as ge,c as yt,d as Ne,e as Be,a as ne}from"../chunks/public.g4KRRLrj.js";import{i as kt,s as je,t as He}from"../chunks/titleUpdate.BzYQbAed.js";import{g as ft,u as wt,c as Et,U as ze}from"../chunks/settings.BrXZiVB0.js";import{L as ct,c as $t,e as ve}from"../chunks/cookiesAreEnabled.zumDw87_.js";import{C as dt}from"../chunks/close.C1UTSa__.js";import{e as xe}from"../chunks/each.Cm4EqpY4.js";import{C as Tt}from"../chunks/checkmark.ChIjfuev.js";import{T as xt}from"../chunks/trash-can.qIaUJhfz.js";import{f as Ue}from"../chunks/index.BxkOjnyH.js";import{M as Ct}from"../chunks/Modal.DDumLBVg.js";const Nt=!0,Mt=Nt;function At(l){let e,r,t='<path fill="currentColor" d="M6 6h20v2H6zm0 6h20v2H6zm0 6h20v2H6zm0 6h20v2H6z"/>',n=[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},l[0]],a={};for(let s=0;s<n.length;s+=1)a=be(a,n[s]);return{c(){e=te("svg"),r=new rt(!0),this.h()},l(s){e=re(s,"svg",{viewBox:!0,width:!0,height:!0});var i=C(e);r=lt(i,!0),i.forEach(h),this.h()},h(){r.a=null,$e(e,a)},m(s,i){T(s,e,i),r.m(t,e)},p(s,[i]){$e(e,a=ft(n,[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},i&1&&s[0]]))},i:le,o:le,d(s){s&&h(e)}}}function It(l,e,r){return l.$$set=t=>{r(0,e=be(be({},e),Te(t)))},e=Te(e),[e]}class St extends oe{constructor(e){super(),ue(this,e,It,At,ie,{})}}function Lt(l){let e,r;return{c(){e=te("svg"),r=te("path"),this.h()},l(t){e=re(t,"svg",{xmlns:!0,class:!0,width:!0,height:!0,fill:!0,viewBox:!0});var n=C(e);r=re(n,"path",{fill:!0,"fill-rule":!0,d:!0,"clip-rule":!0}),C(r).forEach(h),n.forEach(h),this.h()},h(){o(r,"fill","currentColor"),o(r,"fill-rule","evenodd"),o(r,"d","M3.143 20.286h4.286v2.142H3.143A2.143 2.143 0 0 1 1 20.287V3.143A2.143 2.143 0 0 1 3.143 1h17.143a2.143 2.143 0 0 1 2.142 2.143v4.286h-2.142V3.143H3.143v17.143Zm9.643-12.857v3.214H16v2.143h-3.214V16h-2.143v-3.214H7.429v-2.143h3.214V7.429h2.143Zm14.185 2.639 3.533 3.532a1.7 1.7 0 0 1 0 2.4L15.5 31H9.57v-5.928l15-15.004a1.7 1.7 0 0 1 2.4 0Zm-15.257 18.79h2.897l10.116-10.116-2.899-2.897L11.714 25.96v2.897ZM23.346 14.33l2.897 2.897 2.429-2.43-2.897-2.896-2.43 2.429Z"),o(r,"clip-rule","evenodd"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"class",l[0]),o(e,"width","1em"),o(e,"height","1em"),o(e,"fill","none"),o(e,"viewBox","0 0 32 32")},m(t,n){T(t,e,n),p(e,r)},p(t,[n]){n&1&&o(e,"class",t[0])},i:le,o:le,d(t){t&&h(e)}}}function Dt(l,e,r){let{classNames:t=""}=e;return l.$$set=n=>{"classNames"in n&&r(0,t=n.classNames)},[t]}class Ot extends oe{constructor(e){super(),ue(this,e,Dt,Lt,ie,{classNames:0})}}function Pt(l){let e,r,t,n,a,s,i,m,f,c,g,u,b,_,N,v,y,H,k;t=new St({}),f=new Ot({}),_=new dt({});const x=l[8].default,O=nt(x,l,l[7],null);return{c(){e=E("nav"),r=E("button"),q(t.$$.fragment),n=L(),a=E("span"),s=X(l[0]),i=L(),m=E("a"),q(f.$$.fragment),c=L(),g=E("nav"),u=E("div"),b=E("button"),q(_.$$.fragment),N=L(),O&&O.c(),this.h()},l(M){e=$(M,"NAV",{class:!0});var S=C(e);r=$(S,"BUTTON",{type:!0,class:!0,"aria-label":!0});var R=C(r);J(t.$$.fragment,R),R.forEach(h),n=D(S),a=$(S,"SPAN",{class:!0});var V=C(a);s=Y(V,l[0]),V.forEach(h),i=D(S),m=$(S,"A",{href:!0,class:!0});var j=C(m);J(f.$$.fragment,j),j.forEach(h),S.forEach(h),c=D(M),g=$(M,"NAV",{class:!0});var P=C(g);u=$(P,"DIV",{class:!0});var K=C(u);b=$(K,"BUTTON",{type:!0,class:!0,"aria-label":!0});var d=C(b);J(_.$$.fragment,d),d.forEach(h),K.forEach(h),N=D(P),O&&O.l(P),P.forEach(h),this.h()},h(){o(r,"type","button"),o(r,"class","-ml-3 flex size-12 shrink-0 items-center justify-center text-lg"),o(r,"aria-label","Open menu"),o(a,"class","truncate px-4"),o(m,"href",z+"/"),o(m,"class","-mr-3 flex size-12 shrink-0 items-center justify-center text-lg"),fe(m,"invisible",!l[4].params.id),o(e,"class","flex h-12 items-center justify-between border-b bg-gray-50 px-3 md:hidden dark:border-gray-800 dark:bg-gray-800/70"),o(b,"type","button"),o(b,"class","-mr-3 ml-auto flex size-12 items-center justify-center text-lg"),o(b,"aria-label","Close menu"),o(u,"class","flex h-12 items-center px-4"),o(g,"class",v="fixed inset-0 z-30 grid max-h-screen grid-cols-1 grid-rows-[auto,auto,1fr,auto] bg-white dark:bg-gray-900 "+(l[1]?"block":"hidden"))},m(M,S){T(M,e,S),p(e,r),W(t,r,null),l[10](r),p(e,n),p(e,a),p(a,s),p(e,i),p(e,m),W(f,m,null),T(M,c,S),T(M,g,S),p(g,u),p(u,b),W(_,b,null),l[12](b),p(g,N),O&&O.m(g,null),y=!0,H||(k=[se(r,"click",l[9]),se(b,"click",l[11])],H=!0)},p(M,[S]){(!y||S&1)&&pe(s,M[0]),(!y||S&16)&&fe(m,"invisible",!M[4].params.id),O&&O.p&&(!y||S&128)&&at(O,x,M,M[7],y?it(x,M[7],S,null):st(M[7]),null),(!y||S&2&&v!==(v="fixed inset-0 z-30 grid max-h-screen grid-cols-1 grid-rows-[auto,auto,1fr,auto] bg-white dark:bg-gray-900 "+(M[1]?"block":"hidden")))&&o(g,"class",v)},i(M){y||(I(t.$$.fragment,M),I(f.$$.fragment,M),I(_.$$.fragment,M),I(O,M),y=!0)},o(M){B(t.$$.fragment,M),B(f.$$.fragment,M),B(_.$$.fragment,M),B(O,M),y=!1},d(M){M&&(h(e),h(c),h(g)),Q(t),l[10](null),Q(f),Q(_),l[12](null),O&&O.d(M),H=!1,Ce(k)}}}function Bt(l,e,r){let t,n;ae(l,bt,v=>r(6,t=v)),ae(l,Ee,v=>r(4,n=v));let{$$slots:a={},$$scope:s}=e,{isOpen:i=!1}=e,{title:m}=e,f,c;const g=ot(),u=()=>g("toggle",!0);function b(v){Ie[v?"unshift":"push"](()=>{c=v,r(3,c)})}const _=()=>g("toggle",!1);function N(v){Ie[v?"unshift":"push"](()=>{f=v,r(2,f)})}return l.$$set=v=>{"isOpen"in v&&r(1,i=v.isOpen),"title"in v&&r(0,m=v.title),"$$scope"in v&&r(7,s=v.$$scope)},l.$$.update=()=>{l.$$.dirty&1&&r(0,m=m??"New Chat"),l.$$.dirty&64&&t&&g("toggle",!1),l.$$.dirty&14&&(i&&f?f.focus():!i&&Mt&&document.activeElement===f&&c.focus())},[m,i,f,c,n,g,t,s,a,u,b,_,N]}class jt extends oe{constructor(e){super(),ue(this,e,Bt,Pt,ie,{isOpen:1,title:0})}}function Ht(){const{classList:l}=document.querySelector("html"),e=document.querySelector('meta[name="theme-color"]');l.contains("dark")?(l.remove("dark"),e.setAttribute("content","rgb(249, 250, 251)"),localStorage.theme="light"):(l.add("dark"),e.setAttribute("content","rgb(26, 36, 50)"),localStorage.theme="dark")}function zt(l){let e,r,t='<path fill="currentColor" d="M2 26h28v2H2zM25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4zm-5-5L24 7.6l-3 3L17.4 7zM6 22v-3.6l10-10l3.6 3.6l-10 10z"/>',n=[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},l[0]],a={};for(let s=0;s<n.length;s+=1)a=be(a,n[s]);return{c(){e=te("svg"),r=new rt(!0),this.h()},l(s){e=re(s,"svg",{viewBox:!0,width:!0,height:!0});var i=C(e);r=lt(i,!0),i.forEach(h),this.h()},h(){r.a=null,$e(e,a)},m(s,i){T(s,e,i),r.m(t,e)},p(s,[i]){$e(e,a=ft(n,[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},i&1&&s[0]]))},i:le,o:le,d(s){s&&h(e)}}}function Ut(l,e,r){return l.$$set=t=>{r(0,e=be(be({},e),Te(t)))},e=Te(e),[e]}class Vt extends oe{constructor(e){super(),ue(this,e,Ut,zt,ie,{})}}function Ve(l){let e,r="Delete";return{c(){e=E("span"),e.textContent=r,this.h()},l(t){e=$(t,"SPAN",{class:!0,"data-svelte-h":!0}),de(e)!=="svelte-fgoosm"&&(e.textContent=r),this.h()},h(){o(e,"class","mr-1 font-semibold")},m(t,n){T(t,e,n)},d(t){t&&h(e)}}}function Zt(l){let e=l[0].title+"",r;return{c(){r=X(e)},l(t){r=Y(t,e)},m(t,n){T(t,r,n)},p(t,n){n&1&&e!==(e=t[0].title+"")&&pe(r,e)},d(t){t&&h(r)}}}function Rt(l){let e,r,t=l[0].title.replace(new RegExp("\\p{Emoji}","gu"),"")+"",n;return{c(){e=E("div"),r=L(),n=X(t),this.h()},l(a){e=$(a,"DIV",{class:!0}),C(e).forEach(h),r=D(a),n=Y(a,t),this.h()},h(){o(e,"class","mr-1.5 flex size-4 flex-none items-center justify-center rounded-full bg-gray-300 text-xs font-bold uppercase text-gray-500")},m(a,s){T(a,e,s),T(a,r,s),T(a,n,s)},p(a,s){s&1&&t!==(t=a[0].title.replace(new RegExp("\\p{Emoji}","gu"),"")+"")&&pe(n,t)},d(a){a&&(h(e),h(r),h(n))}}}function Gt(l){let e,r,t,n=l[0].title.replace(new RegExp("\\p{Emoji}","gu"),"")+"",a;return{c(){e=E("img"),t=L(),a=X(n),this.h()},l(s){e=$(s,"IMG",{src:!0,alt:!0,class:!0}),t=D(s),a=Y(s,n),this.h()},h(){Se(e.src,r=z+"/settings/assistants/"+l[0].assistantId+"/avatar.jpg?hash="+l[0].avatarHash)||o(e,"src",r),o(e,"alt","Assistant avatar"),o(e,"class","mr-1.5 inline size-4 flex-none rounded-full object-cover")},m(s,i){T(s,e,i),T(s,t,i),T(s,a,i)},p(s,i){i&1&&!Se(e.src,r=z+"/settings/assistants/"+s[0].assistantId+"/avatar.jpg?hash="+s[0].avatarHash)&&o(e,"src",r),i&1&&n!==(n=s[0].title.replace(new RegExp("\\p{Emoji}","gu"),"")+"")&&pe(a,n)},d(s){s&&(h(e),h(t),h(a))}}}function Ft(l){let e,r,t,n,a,s,i,m;return r=new Vt({props:{class:"text-xs text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"}}),a=new xt({props:{class:"text-xs text-gray-400  hover:text-gray-500 dark:hover:text-gray-300"}}),{c(){e=E("button"),q(r.$$.fragment),t=L(),n=E("button"),q(a.$$.fragment),this.h()},l(f){e=$(f,"BUTTON",{type:!0,class:!0,title:!0});var c=C(e);J(r.$$.fragment,c),c.forEach(h),t=D(f),n=$(f,"BUTTON",{type:!0,class:!0,title:!0});var g=C(n);J(a.$$.fragment,g),g.forEach(h),this.h()},h(){o(e,"type","button"),o(e,"class","flex h-5 w-5 items-center justify-center rounded md:hidden md:group-hover:flex"),o(e,"title","Edit conversation title"),o(n,"type","button"),o(n,"class","flex h-5 w-5 items-center justify-center rounded md:hidden md:group-hover:flex"),o(n,"title","Delete conversation")},m(f,c){T(f,e,c),W(r,e,null),T(f,t,c),T(f,n,c),W(a,n,null),s=!0,i||(m=[se(e,"click",we(l[6])),se(n,"click",we(l[7]))],i=!0)},p:le,i(f){s||(I(r.$$.fragment,f),I(a.$$.fragment,f),s=!0)},o(f){B(r.$$.fragment,f),B(a.$$.fragment,f),s=!1},d(f){f&&(h(e),h(t),h(n)),Q(r),Q(a),i=!1,Ce(m)}}}function Kt(l){let e,r,t,n,a,s,i,m;return r=new Tt({props:{class:"text-xs text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"}}),a=new dt({props:{class:"text-xs text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"}}),{c(){e=E("button"),q(r.$$.fragment),t=L(),n=E("button"),q(a.$$.fragment),this.h()},l(f){e=$(f,"BUTTON",{type:!0,class:!0,title:!0});var c=C(e);J(r.$$.fragment,c),c.forEach(h),t=D(f),n=$(f,"BUTTON",{type:!0,class:!0,title:!0});var g=C(n);J(a.$$.fragment,g),g.forEach(h),this.h()},h(){o(e,"type","button"),o(e,"class","flex h-5 w-5 items-center justify-center rounded md:hidden md:group-hover:flex"),o(e,"title","Confirm delete action"),o(n,"type","button"),o(n,"class","flex h-5 w-5 items-center justify-center rounded md:hidden md:group-hover:flex"),o(n,"title","Cancel delete action")},m(f,c){T(f,e,c),W(r,e,null),T(f,t,c),T(f,n,c),W(a,n,null),s=!0,i||(m=[se(e,"click",we(l[4])),se(n,"click",we(l[5]))],i=!0)},p:le,i(f){s||(I(r.$$.fragment,f),I(a.$$.fragment,f),s=!0)},o(f){B(r.$$.fragment,f),B(a.$$.fragment,f),s=!1},d(f){f&&(h(e),h(t),h(n)),Q(r),Q(a),i=!1,Ce(m)}}}function qt(l){let e,r,t,n,a,s,i,m,f,c,g,u=l[1]&&Ve();function b(k,x){return k[0].avatarHash?Gt:k[0].assistantId?Rt:Zt}let _=b(l),N=_(l);const v=[Kt,Ft],y=[];function H(k,x){return k[1]?0:1}return a=H(l),s=y[a]=v[a](l),{c(){e=E("a"),r=E("div"),u&&u.c(),t=L(),N.c(),n=L(),s.c(),this.h()},l(k){e=$(k,"A",{"data-sveltekit-noscroll":!0,href:!0,class:!0});var x=C(e);r=$(x,"DIV",{class:!0});var O=C(r);u&&u.l(O),t=D(O),N.l(O),O.forEach(h),n=D(x),s.l(x),x.forEach(h),this.h()},h(){o(r,"class","flex flex-1 items-center truncate"),o(e,"data-sveltekit-noscroll",""),o(e,"href",i=z+"/conversation/"+l[0].id),o(e,"class",m="group flex h-10 flex-none items-center gap-1.5 rounded-lg pl-2.5 pr-2 text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700 "+(l[0].id===l[2].params.id?"bg-gray-100 dark:bg-gray-700":""))},m(k,x){T(k,e,x),p(e,r),u&&u.m(r,null),p(r,t),N.m(r,null),p(e,n),y[a].m(e,null),f=!0,c||(g=se(e,"mouseleave",l[8]),c=!0)},p(k,[x]){k[1]?u||(u=Ve(),u.c(),u.m(r,t)):u&&(u.d(1),u=null),_===(_=b(k))&&N?N.p(k,x):(N.d(1),N=_(k),N&&(N.c(),N.m(r,null)));let O=a;a=H(k),a===O?y[a].p(k,x):(me(),B(y[O],1,1,()=>{y[O]=null}),he(),s=y[a],s?s.p(k,x):(s=y[a]=v[a](k),s.c()),I(s,1),s.m(e,null)),(!f||x&1&&i!==(i=z+"/conversation/"+k[0].id))&&o(e,"href",i),(!f||x&5&&m!==(m="group flex h-10 flex-none items-center gap-1.5 rounded-lg pl-2.5 pr-2 text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700 "+(k[0].id===k[2].params.id?"bg-gray-100 dark:bg-gray-700":"")))&&o(e,"class",m)},i(k){f||(I(s),f=!0)},o(k){B(s),f=!1},d(k){k&&h(e),u&&u.d(),N.d(),y[a].d(),c=!1,g()}}}function Jt(l,e,r){let t;ae(l,Ee,u=>r(2,t=u));let{conv:n}=e,a=!1;const s=ot(),i=()=>{r(1,a=!1),s("deleteConversation",n.id)},m=()=>r(1,a=!1),f=()=>{const u=prompt("Edit this conversation title:",n.title);u&&s("editConversationTitle",{id:n.id,title:u})},c=u=>{u.shiftKey?s("deleteConversation",n.id):r(1,a=!0)},g=()=>{r(1,a=!1)};return l.$$set=u=>{"conv"in u&&r(0,n=u.conv)},[n,a,t,s,i,m,f,c,g]}class Wt extends oe{constructor(e){super(),ue(this,e,Jt,qt,ie,{conv:0})}}function Ze(l,e,r){const t=l.slice();return t[11]=e[r][0],t[12]=e[r][1],t}function Re(l,e,r){const t=l.slice();return t[15]=e[r],t}function Ge(l){let e,r=l[5][l[11]]+"",t,n,a,s,i=xe(l[12]),m=[];for(let c=0;c<i.length;c+=1)m[c]=Fe(Re(l,i,c));const f=c=>B(m[c],1,1,()=>{m[c]=null});return{c(){e=E("h4"),t=X(r),n=L();for(let c=0;c<m.length;c+=1)m[c].c();a=ye(),this.h()},l(c){e=$(c,"H4",{class:!0});var g=C(e);t=Y(g,r),g.forEach(h),n=D(c);for(let u=0;u<m.length;u+=1)m[u].l(c);a=ye(),this.h()},h(){o(e,"class","mb-1.5 mt-4 pl-0.5 text-sm text-gray-400 first:mt-0 dark:text-gray-500")},m(c,g){T(c,e,g),p(e,t),T(c,n,g);for(let u=0;u<m.length;u+=1)m[u]&&m[u].m(c,g);T(c,a,g),s=!0},p(c,g){if((!s||g&4)&&r!==(r=c[5][c[11]]+"")&&pe(t,r),g&4){i=xe(c[12]);let u;for(u=0;u<i.length;u+=1){const b=Re(c,i,u);m[u]?(m[u].p(b,g),I(m[u],1)):(m[u]=Fe(b),m[u].c(),I(m[u],1),m[u].m(a.parentNode,a))}for(me(),u=i.length;u<m.length;u+=1)f(u);he()}},i(c){if(!s){for(let g=0;g<i.length;g+=1)I(m[g]);s=!0}},o(c){m=m.filter(Boolean);for(let g=0;g<m.length;g+=1)B(m[g]);s=!1},d(c){c&&(h(e),h(n),h(a)),ut(m,c)}}}function Fe(l){let e,r;return e=new Wt({props:{conv:l[15]}}),e.$on("editConversationTitle",l[8]),e.$on("deleteConversation",l[9]),{c(){q(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,n){W(e,t,n),r=!0},p(t,n){const a={};n&4&&(a.conv=t[15]),e.$set(a)},i(t){r||(I(e.$$.fragment,t),r=!0)},o(t){B(e.$$.fragment,t),r=!1},d(t){Q(e,t)}}}function Ke(l){let e,r,t=l[12].length&&Ge(l);return{c(){t&&t.c(),e=ye()},l(n){t&&t.l(n),e=ye()},m(n,a){t&&t.m(n,a),T(n,e,a),r=!0},p(n,a){n[12].length?t?(t.p(n,a),a&4&&I(t,1)):(t=Ge(n),t.c(),I(t,1),t.m(e.parentNode,e)):t&&(me(),B(t,1,1,()=>{t=null}),he())},i(n){r||(I(t),r=!0)},o(n){B(t),r=!1},d(n){n&&h(e),t&&t.d(n)}}}function qe(l){var m,f;let e,r,t=(((m=l[1])==null?void 0:m.username)||((f=l[1])==null?void 0:f.email))+"",n,a,s,i="Sign Out";return{c(){e=E("form"),r=E("span"),n=X(t),a=L(),s=E("button"),s.textContent=i,this.h()},l(c){e=$(c,"FORM",{action:!0,method:!0,class:!0});var g=C(e);r=$(g,"SPAN",{class:!0});var u=C(r);n=Y(u,t),u.forEach(h),a=D(g),s=$(g,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),de(s)!=="svelte-16fy7s"&&(s.textContent=i),g.forEach(h),this.h()},h(){o(r,"class","flex h-9 flex-none shrink items-center gap-1.5 truncate pr-2 text-gray-500 dark:text-gray-400"),o(s,"type","submit"),o(s,"class","ml-auto h-6 flex-none items-center gap-1.5 rounded-md border bg-white px-2 text-gray-700 shadow-sm group-hover:flex hover:shadow-none md:hidden dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400 dark:hover:text-gray-300"),o(e,"action",z+"/logout"),o(e,"method","post"),o(e,"class","group flex items-center gap-1.5 rounded-lg pl-2.5 pr-2 hover:bg-gray-100 dark:hover:bg-gray-700")},m(c,g){T(c,e,g),p(e,r),p(r,n),p(e,a),p(e,s)},p(c,g){var u,b;g&2&&t!==(t=(((u=c[1])==null?void 0:u.username)||((b=c[1])==null?void 0:b.email))+"")&&pe(n,t)},d(c){c&&h(e)}}}function Je(l){let e,r='<button type="submit" class="flex h-9 w-full flex-none items-center gap-1.5 rounded-lg pl-2.5 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700">Login</button>';return{c(){e=E("form"),e.innerHTML=r,this.h()},l(t){e=$(t,"FORM",{action:!0,method:!0,target:!0,"data-svelte-h":!0}),de(e)!=="svelte-mo1hdo"&&(e.innerHTML=r),this.h()},h(){o(e,"action",z+"/login"),o(e,"method","POST"),o(e,"target","_parent")},m(t,n){T(t,e,n)},d(t){t&&h(e)}}}function Qt(l){let e,r,t,n;return{c(){e=E("a"),r=X(`Models\r
			`),t=E("span"),n=X(l[6]),this.h()},l(a){e=$(a,"A",{href:!0,class:!0});var s=C(e);r=Y(s,`Models\r
			`),t=$(s,"SPAN",{class:!0});var i=C(t);n=Y(i,l[6]),i.forEach(h),s.forEach(h),this.h()},h(){o(t,"class","ml-auto rounded-full border border-gray-300 px-2 py-0.5 text-xs text-gray-500 dark:border-gray-500 dark:text-gray-400"),o(e,"href",z+"/models"),o(e,"class","flex h-9 flex-none items-center gap-1.5 rounded-lg pl-2.5 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700")},m(a,s){T(a,e,s),p(e,r),p(e,t),p(t,n)},p:le,d(a){a&&h(e)}}}function We(l){let e,r=`Assistants
			<span class="ml-auto rounded-full border border-gray-300 px-2 py-0.5 text-xs text-gray-500 dark:border-gray-500 dark:text-gray-400">New</span>`;return{c(){e=E("a"),e.innerHTML=r,this.h()},l(t){e=$(t,"A",{href:!0,class:!0,"data-svelte-h":!0}),de(e)!=="svelte-6p74k5"&&(e.innerHTML=r),this.h()},h(){o(e,"href",z+"/assistants"),o(e,"class","flex h-9 flex-none items-center gap-1.5 rounded-lg pl-2.5 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700")},m(t,n){T(t,e,n)},d(t){t&&h(e)}}}function Xt(l){var Me,Ae;let e,r,t,n,a,s,i,m="New Chat",f,c,g,u,b,_,N,v="Theme",y,H,k,x,O="Settings",M,S,R,V;t=new ct({props:{classNames:"mr-1"}});let j=xe(Object.entries(l[2])),P=[];for(let A=0;A<j.length;A+=1)P[A]=Ke(Ze(l,j,A));const K=A=>B(P[A],1,1,()=>{P[A]=null});let d=(((Me=l[1])==null?void 0:Me.username)||((Ae=l[1])==null?void 0:Ae.email))&&qe(l),w=l[0]&&Je(),Z=l[6]>1&&Qt(l),G=l[3].data.enableAssistants&&We();return{c(){e=E("div"),r=E("a"),q(t.$$.fragment),n=L(),a=X(ge),s=L(),i=E("a"),i.textContent=m,f=L(),c=E("div");for(let A=0;A<P.length;A+=1)P[A].c();g=L(),u=E("div"),d&&d.c(),b=L(),w&&w.c(),_=L(),N=E("button"),N.textContent=v,y=L(),Z&&Z.c(),H=L(),G&&G.c(),k=L(),x=E("a"),x.textContent=O,M=L(),this.h()},l(A){e=$(A,"DIV",{class:!0});var F=C(e);r=$(F,"A",{class:!0,href:!0});var ee=C(r);J(t.$$.fragment,ee),n=D(ee),a=Y(ee,ge),ee.forEach(h),s=D(F),i=$(F,"A",{href:!0,class:!0,"data-svelte-h":!0}),de(i)!=="svelte-19nyx7z"&&(i.textContent=m),F.forEach(h),f=D(A),c=$(A,"DIV",{class:!0});var ke=C(c);for(let _e=0;_e<P.length;_e+=1)P[_e].l(ke);ke.forEach(h),g=D(A),u=$(A,"DIV",{class:!0});var U=C(u);d&&d.l(U),b=D(U),w&&w.l(U),_=D(U),N=$(U,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),de(N)!=="svelte-ymga0p"&&(N.textContent=v),y=D(U),Z&&Z.l(U),H=D(U),G&&G.l(U),k=D(U),x=$(U,"A",{href:!0,class:!0,"data-svelte-h":!0}),de(x)!=="svelte-4sv8p6"&&(x.textContent=O),M=D(U),U.forEach(h),this.h()},h(){o(r,"class","flex items-center rounded-xl text-lg font-semibold"),o(r,"href",yt+z+"/"),o(i,"href",`${z}/`),o(i,"class","flex rounded-lg border bg-white px-2 py-0.5 text-center shadow-sm hover:shadow-none dark:border-gray-600 dark:bg-gray-700"),o(e,"class","sticky top-0 flex flex-none items-center justify-between px-3 py-3.5 max-sm:pt-0"),o(c,"class","scrollbar-custom flex flex-col gap-1 overflow-y-auto rounded-r-xl from-gray-50 px-3 pb-3 pt-2 max-sm:bg-gradient-to-t md:bg-gradient-to-l dark:from-gray-800/30"),o(N,"type","button"),o(N,"class","flex h-9 flex-none items-center gap-1.5 rounded-lg pl-2.5 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700"),o(x,"href",z+"/settings"),o(x,"class","flex h-9 flex-none items-center gap-1.5 rounded-lg pl-2.5 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700"),o(u,"class","mt-0.5 flex flex-col gap-1 rounded-r-xl p-3 text-sm md:bg-gradient-to-l md:from-gray-50 md:dark:from-gray-800/30")},m(A,F){T(A,e,F),p(e,r),W(t,r,null),p(r,n),p(r,a),p(e,s),p(e,i),T(A,f,F),T(A,c,F);for(let ee=0;ee<P.length;ee+=1)P[ee]&&P[ee].m(c,null);T(A,g,F),T(A,u,F),d&&d.m(u,null),p(u,b),w&&w.m(u,null),p(u,_),p(u,N),p(u,y),Z&&Z.m(u,null),p(u,H),G&&G.m(u,null),p(u,k),p(u,x),p(u,M),S=!0,R||(V=[se(i,"click",l[4]),se(N,"click",Ht)],R=!0)},p(A,[F]){var ee,ke;if(F&36){j=xe(Object.entries(A[2]));let U;for(U=0;U<j.length;U+=1){const _e=Ze(A,j,U);P[U]?(P[U].p(_e,F),I(P[U],1)):(P[U]=Ke(_e),P[U].c(),I(P[U],1),P[U].m(c,null))}for(me(),U=j.length;U<P.length;U+=1)K(U);he()}(ee=A[1])!=null&&ee.username||(ke=A[1])!=null&&ke.email?d?d.p(A,F):(d=qe(A),d.c(),d.m(u,b)):d&&(d.d(1),d=null),A[0]?w||(w=Je(),w.c(),w.m(u,_)):w&&(w.d(1),w=null),A[6]>1&&Z.p(A,F),A[3].data.enableAssistants?G||(G=We(),G.c(),G.m(u,k)):G&&(G.d(1),G=null)},i(A){if(!S){I(t.$$.fragment,A);for(let F=0;F<j.length;F+=1)I(P[F]);S=!0}},o(A){B(t.$$.fragment,A),P=P.filter(Boolean);for(let F=0;F<P.length;F+=1)B(P[F]);S=!1},d(A){A&&(h(e),h(f),h(c),h(g),h(u)),Q(t),ut(P,A),d&&d.d(),w&&w.d(),Z&&Z.d(),G&&G.d(),R=!1,Ce(V)}}}function Yt(l,e,r){let t,n;ae(l,Ee,_=>r(3,n=_));let{conversations:a=[]}=e,{canLogin:s}=e,{user:i}=e;function m(){kt.set(!0)}const f=[new Date().setDate(new Date().getDate()-1),new Date().setDate(new Date().getDate()-7),new Date().setMonth(new Date().getMonth()-1)],c={today:"Today",week:"This week",month:"This month",older:"Older"},g=n.data.models.filter(_=>!_.unlisted).length;function u(_){Le.call(this,l,_)}function b(_){Le.call(this,l,_)}return l.$$set=_=>{"conversations"in _&&r(7,a=_.conversations),"canLogin"in _&&r(0,s=_.canLogin),"user"in _&&r(1,i=_.user)},l.$$.update=()=>{l.$$.dirty&128&&r(2,t={today:a.filter(({updatedAt:_})=>_.getTime()>f[0]),week:a.filter(({updatedAt:_})=>_.getTime()>f[1]&&_.getTime()<f[0]),month:a.filter(({updatedAt:_})=>_.getTime()>f[2]&&_.getTime()<f[1]),older:a.filter(({updatedAt:_})=>_.getTime()<f[2])})},[s,i,t,n,m,c,g,a,u,b]}class mt extends oe{constructor(e){super(),ue(this,e,Yt,Xt,ie,{conversations:7,canLogin:0,user:1})}}function er(l){let e,r,t,n,a,s,i;return{c(){e=te("svg"),r=te("path"),t=te("path"),n=te("defs"),a=te("radialGradient"),s=te("stop"),i=te("stop"),this.h()},l(m){e=re(m,"svg",{xmlns:!0,width:!0,height:!0,class:!0,fill:!0,viewBox:!0});var f=C(e);r=re(f,"path",{fill:!0,d:!0}),C(r).forEach(h),t=re(f,"path",{fill:!0,"fill-rule":!0,d:!0,"clip-rule":!0}),C(t).forEach(h),n=re(f,"defs",{});var c=C(n);a=re(c,"radialGradient",{id:!0,cx:!0,cy:!0,r:!0,gradientTransform:!0,gradientUnits:!0});var g=C(a);s=re(g,"stop",{"stop-color":!0}),C(s).forEach(h),i=re(g,"stop",{offset:!0,"stop-color":!0}),C(i).forEach(h),g.forEach(h),c.forEach(h),f.forEach(h),this.h()},h(){o(r,"fill","url(#a)"),o(r,"d","M.93 10.65A10.17 10.17 0 0 1 11.11.48h4.67a9.45 9.45 0 0 1 0 18.89H4.53L1.62 22.2a.38.38 0 0 1-.69-.28V10.65Z"),o(t,"fill","#000"),o(t,"fill-rule","evenodd"),o(t,"d","M11.52 7.4a1.86 1.86 0 1 1-3.72 0 1.86 1.86 0 0 1 3.72 0Zm7.57 0a1.86 1.86 0 1 1-3.73 0 1.86 1.86 0 0 1 3.73 0ZM8.9 12.9a.55.55 0 0 0-.11.35.76.76 0 0 1-1.51 0c0-.95.67-1.94 1.76-1.94 1.09 0 1.76 1 1.76 1.94H9.3a.55.55 0 0 0-.12-.35c-.06-.07-.1-.08-.13-.08s-.08 0-.14.08Zm4.04 0a.55.55 0 0 0-.12.35h-1.51c0-.95.68-1.94 1.76-1.94 1.1 0 1.77 1 1.77 1.94h-1.51a.55.55 0 0 0-.12-.35c-.06-.07-.11-.08-.14-.08-.02 0-.07 0-.13.08Zm-1.89.79c-.02 0-.07-.01-.13-.08a.55.55 0 0 1-.12-.36h-1.5c0 .95.67 1.95 1.75 1.95 1.1 0 1.77-1 1.77-1.95h-1.51c0 .16-.06.28-.12.36-.06.07-.11.08-.14.08Zm4.04 0c-.03 0-.08-.01-.14-.08a.55.55 0 0 1-.12-.36h-1.5c0 .95.67 1.95 1.76 1.95 1.08 0 1.76-1 1.76-1.95h-1.51c0 .16-.06.28-.12.36-.06.07-.11.08-.13.08Zm1.76-.44c0-.16.05-.28.12-.35.06-.07.1-.08.13-.08s.08 0 .14.08c.06.07.11.2.11.35a.76.76 0 0 0 1.51 0c0-.95-.67-1.94-1.76-1.94-1.09 0-1.76 1-1.76 1.94h1.5Z"),o(t,"clip-rule","evenodd"),o(s,"stop-color","#FFD21E"),o(i,"offset","1"),o(i,"stop-color","red"),o(a,"id","a"),o(a,"cx","0"),o(a,"cy","0"),o(a,"r","1"),o(a,"gradientTransform","matrix(0 31.37 -34.85 0 13.08 -9.02)"),o(a,"gradientUnits","userSpaceOnUse"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"width","1em"),o(e,"height","1em"),o(e,"class",l[0]),o(e,"fill","none"),o(e,"viewBox","0 0 26 23")},m(m,f){T(m,e,f),p(e,r),p(e,t),p(e,n),p(n,a),p(a,s),p(a,i)},p(m,[f]){f&1&&o(e,"class",m[0])},i:le,o:le,d(m){m&&h(e)}}}function tr(l,e,r){let{classNames:t=""}=e;return l.$$set=n=>{"classNames"in n&&r(0,t=n.classNames)},[t]}class rr extends oe{constructor(e){super(),ue(this,e,tr,er,ie,{classNames:0})}}function lr(l){let e,r,t,n,a,s,i,m;return t=new rr({props:{classNames:"text-2xl mr-2"}}),{c(){e=E("div"),r=E("div"),q(t.$$.fragment),n=L(),a=E("h2"),s=X(l[0]),this.h()},l(f){e=$(f,"DIV",{class:!0});var c=C(e);r=$(c,"DIV",{class:!0});var g=C(r);J(t.$$.fragment,g),n=D(g),a=$(g,"H2",{class:!0});var u=C(a);s=Y(u,l[0]),u.forEach(h),g.forEach(h),c.forEach(h),this.h()},h(){o(a,"class","font-semibold"),o(r,"class","pointer-events-auto flex items-center rounded-full bg-white/90 px-3 py-1 shadow-sm dark:bg-gray-900/80"),o(e,"class","pointer-events-none fixed right-0 top-12 z-20 bg-gradient-to-bl from-red-500/20 via-red-500/0 to-red-500/0 pb-36 pl-36 pr-2 pt-2 md:top-0 md:pr-8 md:pt-5")},m(f,c){T(f,e,c),p(e,r),W(t,r,null),p(r,n),p(r,a),p(a,s),m=!0},p(f,[c]){(!m||c&1)&&pe(s,f[0])},i(f){m||(I(t.$$.fragment,f),ht(()=>{m&&(i||(i=De(e,Ue,{duration:300},!0)),i.run(1))}),m=!0)},o(f){B(t.$$.fragment,f),i||(i=De(e,Ue,{duration:300},!1)),i.run(0),m=!1},d(f){f&&h(e),Q(t),f&&i&&i.end()}}}function nr(l,e,r){let{message:t=""}=e;return l.$$set=n=>{"message"in n&&r(0,t=n.message)},[t]}class ar extends oe{constructor(e){super(),ue(this,e,nr,lr,ie,{message:0})}}function Qe(l){let e,r,t;function n(i,m){return i[0].data.loginEnabled?ir:sr}let a=n(l),s=a(l);return{c(){e=E("button"),s.c(),this.h()},l(i){e=$(i,"BUTTON",{class:!0});var m=C(e);s.l(m),m.forEach(h),this.h()},h(){o(e,"class","w-full justify-center rounded-full border-2 border-gray-300 bg-black px-5 py-2 text-lg font-semibold text-gray-100 transition-colors hover:bg-gray-900"),fe(e,"bg-white",l[0].data.loginEnabled),fe(e,"text-gray-800",l[0].data.loginEnabled),fe(e,"hover:bg-slate-100",l[0].data.loginEnabled)},m(i,m){T(i,e,m),s.m(e,null),r||(t=se(e,"click",pt(we(l[3]))),r=!0)},p(i,m){a!==(a=n(i))&&(s.d(1),s=a(i),s&&(s.c(),s.m(e,null))),m&1&&fe(e,"bg-white",i[0].data.loginEnabled),m&1&&fe(e,"text-gray-800",i[0].data.loginEnabled),m&1&&fe(e,"hover:bg-slate-100",i[0].data.loginEnabled)},d(i){i&&h(e),s.d(),r=!1,t()}}}function sr(l){let e;return{c(){e=X("Start chatting")},l(r){e=Y(r,"Start chatting")},m(r,t){T(r,e,t)},d(r){r&&h(e)}}}function ir(l){let e;return{c(){e=X("Try as guest")},l(r){e=Y(r,"Try as guest")},m(r,t){T(r,e,t)},d(r){r&&h(e)}}}function Xe(l){let e,r,t,n,a=ge==="HuggingChat";return{c(){e=E("form"),r=E("button"),t=X(`Sign in\r
						`),this.h()},l(s){e=$(s,"FORM",{action:!0,target:!0,method:!0,class:!0});var i=C(e);r=$(i,"BUTTON",{type:!0,class:!0});var m=C(r);t=Y(m,`Sign in\r
						`),m.forEach(h),i.forEach(h),this.h()},h(){o(r,"type","submit"),o(r,"class","flex w-full items-center justify-center whitespace-nowrap rounded-full border-2 border-black bg-black px-5 py-2 text-lg font-semibold text-gray-100 transition-colors hover:bg-gray-900"),o(e,"action",z+"/login"),o(e,"target","_parent"),o(e,"method","POST"),o(e,"class","w-full")},m(s,i){T(s,e,i),p(e,r),p(r,t),n=!0},i(s){n||(I(a),n=!0)},o(s){B(a),n=!1},d(s){s&&h(e)}}}function or(l){let e,r,t,n,a,s,i,m,f,c,g,u,b,_,N;t=new ct({props:{classNames:"mr-1"}});let v=(l[0].data.guestMode||!l[0].data.loginEnabled)&&Qe(l),y=l[0].data.loginEnabled&&Xe();return{c(){e=E("div"),r=E("h2"),q(t.$$.fragment),n=L(),a=X(ge),s=L(),i=E("p"),m=X(Ne),f=L(),c=E("p"),g=X(Be),u=L(),b=E("div"),v&&v.c(),_=L(),y&&y.c(),this.h()},l(H){e=$(H,"DIV",{class:!0});var k=C(e);r=$(k,"H2",{class:!0});var x=C(r);J(t.$$.fragment,x),n=D(x),a=Y(x,ge),x.forEach(h),s=D(k),i=$(k,"P",{class:!0,style:!0});var O=C(i);m=Y(O,Ne),O.forEach(h),f=D(k),c=$(k,"P",{class:!0});var M=C(c);g=Y(M,Be),M.forEach(h),u=D(k),b=$(k,"DIV",{class:!0});var S=C(b);v&&v.l(S),_=D(S),y&&y.l(S),S.forEach(h),k.forEach(h),this.h()},h(){o(r,"class","flex items-center text-2xl font-semibold text-gray-800"),o(i,"class","text-lg font-semibold leading-snug text-gray-800"),gt(i,"text-wrap","balance"),o(c,"class","text-sm text-gray-500"),o(b,"class","flex w-full flex-col items-center gap-2"),o(e,"class","flex w-full flex-col items-center gap-6 bg-gradient-to-b from-primary-500/40 via-primary-500/10 to-primary-500/0 px-5 pb-8 pt-9 text-center sm:px-6")},m(H,k){T(H,e,k),p(e,r),W(t,r,null),p(r,n),p(r,a),p(e,s),p(e,i),p(i,m),p(e,f),p(e,c),p(c,g),p(e,u),p(e,b),v&&v.m(b,null),p(b,_),y&&y.m(b,null),N=!0},p(H,k){H[0].data.guestMode||!H[0].data.loginEnabled?v?v.p(H,k):(v=Qe(H),v.c(),v.m(b,_)):v&&(v.d(1),v=null),H[0].data.loginEnabled?y?k&1&&I(y,1):(y=Xe(),y.c(),I(y,1),y.m(b,null)):y&&(me(),B(y,1,1,()=>{y=null}),he())},i(H){N||(I(t.$$.fragment,H),I(y),N=!0)},o(H){B(t.$$.fragment,H),B(y),N=!1},d(H){H&&h(e),Q(t),v&&v.d(),y&&y.d()}}}function ur(l){let e,r;return e=new Ct({props:{$$slots:{default:[or]},$$scope:{ctx:l}}}),{c(){q(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,n){W(e,t,n),r=!0},p(t,[n]){const a={};n&19&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(I(e.$$.fragment,t),r=!0)},o(t){B(e.$$.fragment,t),r=!1},d(t){Q(e,t)}}}function fr(l,e,r){let t,n;ae(l,Ee,i=>r(0,t=i));const a=wt();return ae(l,a,i=>r(1,n=i)),[t,n,a,()=>{$t()||window.open(window.location.href,"_blank"),ce(a,n.ethicsModalAccepted=!0,n)}]}class cr extends oe{constructor(e){super(),ue(this,e,fr,ur,ie,{})}}function Ye(l){let e,r,t,n,a,s,i,m,f,c,g;return{c(){e=E("meta"),r=L(),t=E("meta"),n=L(),a=E("meta"),i=L(),m=E("meta"),c=L(),g=E("meta"),this.h()},l(u){e=$(u,"META",{property:!0,content:!0}),r=D(u),t=$(u,"META",{property:!0,content:!0}),n=D(u),a=$(u,"META",{property:!0,content:!0}),i=D(u),m=$(u,"META",{property:!0,content:!0}),c=D(u),g=$(u,"META",{property:!0,content:!0}),this.h()},h(){o(e,"property","og:title"),o(e,"content",ge),o(t,"property","og:type"),o(t,"content","website"),o(a,"property","og:url"),o(a,"content",s=""+(l[1].url.origin+z)),o(m,"property","og:image"),o(m,"content",f=l[1].url.origin+z+"/"+ne+"/thumbnail.png"),o(g,"property","og:description"),o(g,"content",Ne)},m(u,b){T(u,e,b),T(u,r,b),T(u,t,b),T(u,n,b),T(u,a,b),T(u,i,b),T(u,m,b),T(u,c,b),T(u,g,b)},p(u,b){b&2&&s!==(s=""+(u[1].url.origin+z))&&o(a,"content",s),b&2&&f!==(f=u[1].url.origin+z+"/"+ne+"/thumbnail.png")&&o(m,"content",f)},d(u){u&&(h(e),h(r),h(t),h(n),h(a),h(i),h(m),h(c),h(g))}}}function et(l){let e,r;return e=new cr({}),{c(){q(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,n){W(e,t,n),r=!0},i(t){r||(I(e.$$.fragment,t),r=!0)},o(t){B(e.$$.fragment,t),r=!1},d(t){Q(e,t)}}}function dr(l){let e,r;return e=new mt({props:{conversations:l[0].conversations,user:l[0].user,canLogin:l[0].user===void 0&&l[0].loginEnabled}}),e.$on("shareConversation",l[16]),e.$on("deleteConversation",l[17]),e.$on("editConversationTitle",l[18]),{c(){q(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,n){W(e,t,n),r=!0},p(t,n){const a={};n&1&&(a.conversations=t[0].conversations),n&1&&(a.user=t[0].user),n&1&&(a.canLogin=t[0].user===void 0&&t[0].loginEnabled),e.$set(a)},i(t){r||(I(e.$$.fragment,t),r=!0)},o(t){B(e.$$.fragment,t),r=!1},d(t){Q(e,t)}}}function tt(l){let e,r;return e=new ar({props:{message:l[4]}}),{c(){q(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,n){W(e,t,n),r=!0},p(t,n){const a={};n&16&&(a.message=t[4]),e.$set(a)},i(t){r||(I(e.$$.fragment,t),r=!0)},o(t){B(e.$$.fragment,t),r=!1},d(t){Q(e,t)}}}function mr(l){let e,r,t,n=!l[1].url.pathname.includes("/assistant/")&&l[1].route.id!=="/assistants",a,s,i,m,f,c,g,u,b,_,N,v,y,H,k,x,O,M,S;document.title=ge;let R=n&&Ye(l),V=!l[2].ethicsModalAccepted&&l[1].url.pathname!==`${z}/privacy`&&et();y=new jt({props:{isOpen:l[3],title:l[5],$$slots:{default:[dr]},$$scope:{ctx:l}}}),y.$on("toggle",l[19]),x=new mt({props:{conversations:l[0].conversations,user:l[0].user,canLogin:l[0].user===void 0&&l[0].loginEnabled}}),x.$on("shareConversation",l[20]),x.$on("deleteConversation",l[21]),x.$on("editConversationTitle",l[22]);let j=l[4]&&tt(l);const P=l[15].default,K=nt(P,l,l[23],null);return{c(){e=E("meta"),r=E("meta"),t=E("meta"),R&&R.c(),a=E("link"),i=E("link"),f=E("link"),g=E("link"),b=ye(),_=L(),V&&V.c(),N=L(),v=E("div"),q(y.$$.fragment),H=L(),k=E("nav"),q(x.$$.fragment),O=L(),j&&j.c(),M=L(),K&&K.c(),this.h()},l(d){const w=_t("svelte-lf23ke",document.head);e=$(w,"META",{name:!0,content:!0}),r=$(w,"META",{name:!0,content:!0}),t=$(w,"META",{name:!0,content:!0}),R&&R.l(w),a=$(w,"LINK",{rel:!0,href:!0,sizes:!0}),i=$(w,"LINK",{rel:!0,href:!0,type:!0}),f=$(w,"LINK",{rel:!0,href:!0}),g=$(w,"LINK",{rel:!0,href:!0}),b=ye(),w.forEach(h),_=D(d),V&&V.l(d),N=D(d),v=$(d,"DIV",{class:!0});var Z=C(v);J(y.$$.fragment,Z),H=D(Z),k=$(Z,"NAV",{class:!0});var G=C(k);J(x.$$.fragment,G),G.forEach(h),O=D(Z),j&&j.l(Z),M=D(Z),K&&K.l(Z),Z.forEach(h),this.h()},h(){o(e,"name","description"),o(e,"content","The first open source alternative to ChatGPT. ðŸ’ª"),o(r,"name","twitter:card"),o(r,"content","summary_large_image"),o(t,"name","twitter:site"),o(t,"content","@huggingface"),o(a,"rel","icon"),o(a,"href",s=l[1].url.origin+z+"/"+ne+"/favicon.ico"),o(a,"sizes","32x32"),o(i,"rel","icon"),o(i,"href",m=l[1].url.origin+z+"/"+ne+"/icon.svg"),o(i,"type","image/svg+xml"),o(f,"rel","apple-touch-icon"),o(f,"href",c=l[1].url.origin+z+"/"+ne+"/apple-touch-icon.png"),o(g,"rel","manifest"),o(g,"href",u=l[1].url.origin+z+"/"+ne+"/manifest.json"),o(k,"class","grid max-h-screen grid-cols-1 grid-rows-[auto,1fr,auto] max-md:hidden"),o(v,"class","grid h-full w-screen grid-cols-1 grid-rows-[auto,1fr] overflow-hidden text-smd md:grid-cols-[280px,1fr] md:grid-rows-[1fr] dark:text-gray-300")},m(d,w){p(document.head,e),p(document.head,r),p(document.head,t),R&&R.m(document.head,null),p(document.head,a),p(document.head,i),p(document.head,f),p(document.head,g),p(document.head,b),T(d,_,w),V&&V.m(d,w),T(d,N,w),T(d,v,w),W(y,v,null),p(v,H),p(v,k),W(x,k,null),p(v,O),j&&j.m(v,null),p(v,M),K&&K.m(v,null),S=!0},p(d,[w]){w&2&&(n=!d[1].url.pathname.includes("/assistant/")&&d[1].route.id!=="/assistants"),n?R?R.p(d,w):(R=Ye(d),R.c(),R.m(a.parentNode,a)):R&&(R.d(1),R=null),(!S||w&2&&s!==(s=d[1].url.origin+z+"/"+ne+"/favicon.ico"))&&o(a,"href",s),(!S||w&2&&m!==(m=d[1].url.origin+z+"/"+ne+"/icon.svg"))&&o(i,"href",m),(!S||w&2&&c!==(c=d[1].url.origin+z+"/"+ne+"/apple-touch-icon.png"))&&o(f,"href",c),(!S||w&2&&u!==(u=d[1].url.origin+z+"/"+ne+"/manifest.json"))&&o(g,"href",u),!d[2].ethicsModalAccepted&&d[1].url.pathname!==`${z}/privacy`?V?w&6&&I(V,1):(V=et(),V.c(),I(V,1),V.m(N.parentNode,N)):V&&(me(),B(V,1,1,()=>{V=null}),he());const Z={};w&8&&(Z.isOpen=d[3]),w&32&&(Z.title=d[5]),w&8388609&&(Z.$$scope={dirty:w,ctx:d}),y.$set(Z);const G={};w&1&&(G.conversations=d[0].conversations),w&1&&(G.user=d[0].user),w&1&&(G.canLogin=d[0].user===void 0&&d[0].loginEnabled),x.$set(G),d[4]?j?(j.p(d,w),w&16&&I(j,1)):(j=tt(d),j.c(),I(j,1),j.m(v,M)):j&&(me(),B(j,1,1,()=>{j=null}),he()),K&&K.p&&(!S||w&8388608)&&at(K,P,d,d[23],S?it(P,d[23],w,null):st(d[23]),null)},i(d){S||(I(V),I(y.$$.fragment,d),I(x.$$.fragment,d),I(j),I(K,d),S=!0)},o(d){B(V),B(y.$$.fragment,d),B(x.$$.fragment,d),B(j),B(K,d),S=!1},d(d){d&&(h(_),h(N),h(v)),h(e),h(r),h(t),R&&R.d(d),h(a),h(i),h(f),h(g),h(b),V&&V.d(d),Q(y),Q(x),j&&j.d(),K&&K.d(d)}}}function hr(l,e,r){let t,n,a,s,i;ae(l,Ee,d=>r(1,n=d)),ae(l,He,d=>r(13,s=d)),ae(l,ve,d=>r(14,i=d));let{$$slots:m={},$$scope:f}=e;var c,g,u,b;let{data:_}=e,N=!1,v,y;async function H(){i&&y&&i!==y&&(clearTimeout(v),r(4,y=null),await new Promise(d=>setTimeout(d,300))),r(4,y=i),v=setTimeout(()=>{ce(ve,i=null,i),r(4,y=null)},3e3)}async function k(d){try{if(!(await fetch(`${z}/conversation/${d}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok){ce(ve,i="Error while deleting conversation, try again.",i);return}n.params.id!==d?await Pe(ze.ConversationList):await Oe(`${z}/`,{invalidateAll:!0})}catch(w){console.error(w),ce(ve,i=String(w),i)}}async function x(d,w){try{if(!(await fetch(`${z}/conversation/${d}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:w})})).ok){ce(ve,i="Error while editing title, try again.",i);return}await Pe(ze.ConversationList)}catch(Z){console.error(Z),ce(ve,i=String(Z),i)}}vt(()=>{clearTimeout(v)});const O=Et(_.settings);ae(l,O,d=>r(2,a=d));const M=d=>je(d.detail.id,d.detail.title),S=d=>k(d.detail),R=d=>x(d.detail.id,d.detail.title),V=d=>r(3,N=d.detail),j=d=>je(d.detail.id,d.detail.title),P=d=>k(d.detail),K=d=>x(d.detail.id,d.detail.title);return l.$$set=d=>{"data"in d&&r(0,_=d.data),"$$scope"in d&&r(23,f=d.$$scope)},l.$$.update=()=>{if(l.$$.dirty&16384&&i&&H(),l.$$.dirty&8705&&s){const d=_.conversations.findIndex(({id:w})=>w===(s==null?void 0:s.convId));d!=-1&&r(0,_.conversations[d].title=r(9,c=s==null?void 0:s.title)!==null&&c!==void 0?c:_.conversations[d].title,_),r(0,_.conversations=[..._.conversations],_),ce(He,s=null,s)}l.$$.dirty&1030&&n.url.searchParams.has("model")&&(a.activeModel===n.url.searchParams.get("model")&&Oe(`${z}/?`),O.instantSet({activeModel:r(10,g=n.url.searchParams.get("model"))!==null&&g!==void 0?g:a.activeModel})),l.$$.dirty&6147&&r(5,t=["/models","/assistants","/privacy"].includes(r(11,u=n.route.id)!==null&&u!==void 0?u:"")?"":r(12,b=_.conversations.find(d=>d.id===n.params.id))===null||b===void 0?void 0:b.title)},[_,n,a,N,y,t,k,x,O,c,g,u,b,s,i,m,M,S,R,V,j,P,K,f]}class Mr extends oe{constructor(e){super(),ue(this,e,hr,mr,ie,{data:0})}}export{Mr as component};
