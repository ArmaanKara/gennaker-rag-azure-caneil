import{s as Mt,e as f,a as x,t as z,o as Ct,c as p,f as d,g as $,b as T,d as D,q as vt,h as e,j as c,i as G,r as rt,u as Nt,v as ot,k as tt,w as Ot,l as bt,x as yt,y as kt}from"../chunks/scheduler.nTQPeTYQ.js";import{S as St,i as Bt,c as Pt,a as xt,m as $t,t as jt,d as It,e as Ut}from"../chunks/index.CanFk0Lh.js";import{b as k,a as zt,g as Y,c as Et}from"../chunks/entry.DNyy5_P4.js";import{c as Dt}from"../chunks/clickOutside.D-5j4fJ8.js";import{u as Gt}from"../chunks/settings.BrXZiVB0.js";import{e as wt}from"../chunks/forms.xaAVoexL.js";import{P as Z}from"../chunks/public.g4KRRLrj.js";import{p as qt}from"../chunks/stores.DJlJkp3c.js";import{G as Vt}from"../chunks/gear-fill.C0ybdc6u.js";function Ft(l){let t,i=l[0].assistant.name[0]+"",s;return{c(){t=f("div"),s=z(i),this.h()},l(a){t=p(a,"DIV",{class:!0});var r=T(t);s=D(r,i),r.forEach(d),this.h()},h(){e(t,"class","flex size-16 flex-none items-center justify-center rounded-full bg-gray-300 text-2xl font-bold uppercase text-gray-500 sm:size-24")},m(a,r){G(a,t,r),c(t,s)},p(a,r){r&1&&i!==(i=a[0].assistant.name[0]+"")&&tt(s,i)},d(a){a&&d(t)}}}function Ht(l){let t,i;return{c(){t=f("img"),this.h()},l(s){t=p(s,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){e(t,"class","size-16 flex-none rounded-full object-cover sm:size-24"),kt(t.src,i=k+"/settings/assistants/"+l[0].assistant._id+"/avatar.jpg?hash="+l[0].assistant.avatar)||e(t,"src",i),e(t,"alt","avatar")},m(s,a){G(s,t,a)},p(s,a){a&1&&!kt(t.src,i=k+"/settings/assistants/"+s[0].assistant._id+"/avatar.jpg?hash="+s[0].assistant.avatar)&&e(t,"src",i)},d(s){s&&d(t)}}}function Tt(l){let t,i=l[0].assistant.description+"",s;return{c(){t=f("h3"),s=z(i),this.h()},l(a){t=p(a,"H3",{class:!0});var r=T(t);s=D(r,i),r.forEach(d),this.h()},h(){e(t,"class","line-clamp-6 text-balance text-sm text-gray-500")},m(a,r){G(a,t,r),c(t,s)},p(a,r){r&1&&i!==(i=a[0].assistant.description+"")&&tt(s,i)},d(a){a&&d(t)}}}function At(l){let t,i,s,a=l[0].assistant.createdByName+"",r,_;return{c(){t=f("p"),i=z("Created by "),s=f("a"),r=z(a),this.h()},l(h){t=p(h,"P",{class:!0});var g=T(t);i=D(g,"Created by "),s=p(g,"A",{class:!0,href:!0});var C=T(s);r=D(C,a),C.forEach(d),g.forEach(d),this.h()},h(){e(s,"class","hover:underline"),e(s,"href",_=k+"/assistants?user="+l[0].assistant.createdByName),e(t,"class","mt-2 text-sm text-gray-500")},m(h,g){G(h,t,g),c(t,i),c(t,s),c(s,r)},p(h,g){g&1&&a!==(a=h[0].assistant.createdByName+"")&&tt(r,a),g&1&&_!==(_=k+"/assistants?user="+h[0].assistant.createdByName)&&e(s,"href",_)},d(h){h&&d(t)}}}function Lt(l){let t,i,s,a,r,_,h,g,C,O,j,o,m,I,A,N,P,et,V,F,at,H,U,q=l[0].assistant.name+"",L,st,R,J,S,ct="Cancel",nt,M,B,ut="Start chatting",K,Q,W,E,lt,dt;P=new Vt({props:{class:"mr-1.5 text-xxs"}});function mt(n,u){return n[0].assistant.avatar?Ht:Ft}let X=mt(l),w=X(l),v=l[0].assistant.description&&Tt(l),b=l[0].assistant.createdByName&&At(l);return{c(){t=f("meta"),s=f("meta"),a=f("meta"),_=f("meta"),g=f("meta"),O=f("meta"),j=x(),o=f("div"),m=f("dialog"),I=f("div"),A=f("form"),N=f("button"),Pt(P.$$.fragment),et=z(`\r
					Settings`),at=x(),w.c(),H=x(),U=f("h1"),L=z(q),st=x(),v&&v.c(),R=x(),b&&b.c(),J=x(),S=f("button"),S.textContent=ct,nt=x(),M=f("form"),B=f("button"),B.textContent=ut,this.h()},l(n){const u=Ct("svelte-f5y8vl",document.head);t=p(u,"META",{property:!0,content:!0}),s=p(u,"META",{property:!0,content:!0}),a=p(u,"META",{property:!0,content:!0}),_=p(u,"META",{property:!0,content:!0}),g=p(u,"META",{property:!0,content:!0}),O=p(u,"META",{name:!0,content:!0}),u.forEach(d),j=$(n),o=p(n,"DIV",{class:!0});var ft=T(o);m=p(ft,"DIALOG",{class:!0});var y=T(m);I=p(y,"DIV",{class:!0});var pt=T(I);A=p(pt,"FORM",{method:!0,action:!0,class:!0});var _t=T(A);N=p(_t,"BUTTON",{class:!0,name:!0,type:!0});var it=T(N);xt(P.$$.fragment,it),et=D(it,`\r
					Settings`),it.forEach(d),_t.forEach(d),pt.forEach(d),at=$(y),w.l(y),H=$(y),U=p(y,"H1",{class:!0});var ht=T(U);L=D(ht,q),ht.forEach(d),st=$(y),v&&v.l(y),R=$(y),b&&b.l(y),J=$(y),S=p(y,"BUTTON",{class:!0,"data-svelte-h":!0}),vt(S)!=="svelte-1c2du3v"&&(S.textContent=ct),nt=$(y),M=p(y,"FORM",{method:!0,action:!0,class:!0});var gt=T(M);B=p(gt,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),vt(B)!=="svelte-1me4cd7"&&(B.textContent=ut),gt.forEach(d),y.forEach(d),ft.forEach(d),this.h()},h(){e(t,"property","og:title"),e(t,"content",i=l[0].assistant.name+" - "+Z),e(s,"property","og:type"),e(s,"content","link"),e(a,"property","og:description"),e(a,"content",r=`Use the ${l[0].assistant.name} assistant inside of ${Z}`),e(_,"property","og:image"),e(_,"content",h=l[2].url.origin+k+"/assistant/"+l[0].assistant._id+"/thumbnail.png"),e(g,"property","og:url"),e(g,"content",C=l[2].url.href),e(O,"name","twitter:card"),e(O,"content","summary_large_image"),e(N,"class","flex items-center rounded-full border border-gray-200 px-2.5 py-1 text-sm text-gray-900 hover:bg-gray-100"),e(N,"name","Settings"),e(N,"type","submit"),e(A,"method","POST"),e(A,"action",V=k+"/settings/assistants/"+l[0].assistant._id+"?/subscribe"),e(A,"class","w-full"),e(I,"class","absolute right-0 top-0 m-6"),e(U,"class","text-balance text-xl font-bold"),e(S,"class","mt-4 w-full rounded-full bg-gray-200 px-4 py-2 font-semibold text-gray-700"),e(B,"type","submit"),e(B,"class","w-full rounded-full bg-black px-4 py-3 font-semibold text-white"),e(M,"method","POST"),e(M,"action",K=k+"/settings/assistants/"+l[0].assistant._id+"?/subscribe"),e(M,"class","w-full"),m.open=!0,e(m,"class","z-10 flex flex-col content-center items-center gap-x-10 gap-y-3 overflow-hidden rounded-2xl bg-white p-4 pt-6 text-center shadow-2xl outline-none max-sm:w-[85dvw] max-sm:px-6 md:w-96 md:grid-cols-3 md:grid-rows-[auto,1fr] md:p-8"),e(o,"class","fixed inset-0 flex items-center justify-center bg-black/80 backdrop-blur-sm dark:bg-black/50")},m(n,u){c(document.head,t),c(document.head,s),c(document.head,a),c(document.head,_),c(document.head,g),c(document.head,O),G(n,j,u),G(n,o,u),c(o,m),c(m,I),c(I,A),c(A,N),$t(P,N,null),c(N,et),c(m,at),w.m(m,null),c(m,H),c(m,U),c(U,L),c(m,st),v&&v.m(m,null),c(m,R),b&&b.m(m,null),c(m,J),c(m,S),c(m,nt),c(m,M),c(M,B),E=!0,lt||(dt=[rt(F=wt.call(null,A,l[5])),Nt(S,"click",l[6]),rt(Q=wt.call(null,M,l[7])),rt(W=Dt.call(null,m,l[8]))],lt=!0)},p(n,[u]){(!E||u&1&&i!==(i=n[0].assistant.name+" - "+Z))&&e(t,"content",i),(!E||u&1&&r!==(r=`Use the ${n[0].assistant.name} assistant inside of ${Z}`))&&e(a,"content",r),(!E||u&5&&h!==(h=n[2].url.origin+k+"/assistant/"+n[0].assistant._id+"/thumbnail.png"))&&e(_,"content",h),(!E||u&4&&C!==(C=n[2].url.href))&&e(g,"content",C),(!E||u&1&&V!==(V=k+"/settings/assistants/"+n[0].assistant._id+"?/subscribe"))&&e(A,"action",V),F&&ot(F.update)&&u&9&&F.update.call(null,n[5]),X===(X=mt(n))&&w?w.p(n,u):(w.d(1),w=X(n),w&&(w.c(),w.m(m,H))),(!E||u&1)&&q!==(q=n[0].assistant.name+"")&&tt(L,q),n[0].assistant.description?v?v.p(n,u):(v=Tt(n),v.c(),v.m(m,R)):v&&(v.d(1),v=null),n[0].assistant.createdByName?b?b.p(n,u):(b=At(n),b.c(),b.m(m,J)):b&&(b.d(1),b=null),(!E||u&1&&K!==(K=k+"/settings/assistants/"+n[0].assistant._id+"?/subscribe"))&&e(M,"action",K),Q&&ot(Q.update)&&u&9&&Q.update.call(null,n[7]),W&&ot(W.update)&&u&2&&W.update.call(null,n[8])},i(n){E||(jt(P.$$.fragment,n),E=!0)},o(n){It(P.$$.fragment,n),E=!1},d(n){n&&(d(j),d(o)),d(t),d(s),d(a),d(_),d(g),d(O),Ut(P),w.d(),v&&v.d(),b&&b.d(),lt=!1,Ot(dt)}}}function Rt(l,t,i){let s,a;bt(l,qt,o=>i(2,s=o));let{data:r}=t,_=k;zt(({from:o})=>{o!=null&&o.url.pathname.includes("settings")||i(1,_=(o==null?void 0:o.url.toString())||_)});const h=Gt();bt(l,h,o=>i(3,a=o));const g=()=>async({result:o})=>{o.type==="success"?(yt(h,a.activeModel=r.assistant._id,a),await Y(`${k}/settings/assistants/${r.assistant._id}`,{invalidateAll:!0})):await Et(o)},C=()=>{Y(_)},O=()=>async({result:o})=>{o.type==="success"?(yt(h,a.activeModel=r.assistant._id,a),Y(`${k}`||"/")):await Et(o)},j=()=>{Y(_)};return l.$$set=o=>{"data"in o&&i(0,r=o.data)},[r,_,s,a,h,g,C,O,j]}class ae extends St{constructor(t){super(),Bt(this,t,Rt,Lt,Mt,{data:0})}}export{ae as component};
